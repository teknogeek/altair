(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{313:function(e,t,i){"use strict";i.r(t);var a=i(16),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"writing-a-plugin"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#writing-a-plugin"}},[e._v("#")]),e._v(" Writing A Plugin")]),e._v(" "),i("p",[e._v("A plugin allows extending the functionality of Altair to be able to do more. A typical plugin that can be created for Altair involves the following:")]),e._v(" "),i("ul",[i("li",[e._v("Every plugin should be published as public npm packages")]),e._v(" "),i("li",[e._v("All plugin names should begin with "),i("code",[e._v("altair-graphql-plugin-")]),e._v(". For example, "),i("code",[e._v("altair-graphql-plugin-graphql-explorer")]),e._v(" is the name of the GraphQL explorer plugin")]),e._v(" "),i("li",[e._v("All plugins must have a "),i("code",[e._v("manifest.json")]),e._v(" file, which is what Altair would read, and what would define your plugin structure")]),e._v(" "),i("li",[e._v("The plugin manifest.json file should conform to the "),i("a",{attrs:{href:"https://github.com/imolorhe/altair/blob/master/packages/altair-app/src/app/services/plugin/plugin.ts#L52",target:"_blank",rel:"noopener noreferrer"}},[e._v("PluginManifest interface"),i("OutboundLink")],1)])]),e._v(" "),i("p",[e._v("An example plugin manifest can be found "),i("a",{attrs:{href:"https://github.com/imolorhe/altair-graphql-plugin-birdseye/blob/master/manifest.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),i("OutboundLink")],1),e._v(".")]),e._v(" "),i("h4",{attrs:{id:"manifest-json-file"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#manifest-json-file"}},[e._v("#")]),e._v(" manifest.json file")]),e._v(" "),i("p",[e._v("The manifest.json file has the following fields:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("manifest_version")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": This should be set to "),i("code",[e._v("2")]),e._v(". It is just a control measure for variations in the manifest config.")]),e._v(" "),i("li",[i("code",[e._v("name")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": This is the name of the plugin. It should be the same name you would use in your "),i("code",[e._v("package.json")]),e._v(" file. It uniquely identifies your plugin. The plugin name must begin with "),i("code",[e._v("altair-graphql-plugin-")]),e._v(".")]),e._v(" "),i("li",[i("code",[e._v("display_name")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": This is the name of the plugin that is displayed in the UI. It is the human readable version of your plugin name.")]),e._v(" "),i("li",[i("code",[e._v("version")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": This is the version of your plugin. It should be the same version you would have in your "),i("code",[e._v("package.json")]),e._v(" file (except you have a good reason why they should be different).")]),e._v(" "),i("li",[i("code",[e._v("description")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": This is the description of what your plugin is about. It would be used to describe your plugin.")]),e._v(" "),i("li",[i("code",[e._v("scripts")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": An array containing the list of scripts (relative to the plugin root directory) that need to be loaded for the plugin to function.")]),e._v(" "),i("li",[i("code",[e._v("plugin_class")]),e._v(" "),i("em",[e._v("(Required)")]),e._v(": This specifies the class name of the plugin, for discovery (more details about the plugin class below).")]),e._v(" "),i("li",[i("code",[e._v("author")]),e._v(": The name of the plugin author.")]),e._v(" "),i("li",[i("code",[e._v("author_email")]),e._v(": The email of the author.")]),e._v(" "),i("li",[i("code",[e._v("styles")]),e._v(": An array containing the list of styles (relative to the plugin root directory) that need to be loaded for the plugin to function.")]),e._v(" "),i("li",[i("code",[e._v("capabilities")]),e._v(": Specifies the capabilities (functionalities) available to the plugin. In the future, this would be used to request the necessary permissions from the user.")]),e._v(" "),i("li",[i("code",[e._v("type")]),e._v(": This specifies the type of plugin. This determines how the plugin would interact with Altair. For now there is just the typical plugin type (registered plugin class). In the future, this would include other plugins like themes.")])]),e._v(" "),i("h4",{attrs:{id:"developing-plugins-locally"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#developing-plugins-locally"}},[e._v("#")]),e._v(" Developing Plugins Locally")]),e._v(" "),i("p",[e._v("Ensure you have at least version 2.4.7 of Altair installed, and you have "),i("code",[e._v("enableExperimental")]),e._v(" option set to "),i("code",[e._v("true")]),e._v(" in the settings pane. In the "),i("code",[e._v("plugin.list")]),e._v(" in the settings pane, specify your local plugin following this pattern "),i("code",[e._v("url:altair-graphql-plugin-some-plugin@0.0.1::[url]->[http://localhost:8080]")]),e._v(". In this example, you are working on a plugin called "),i("code",[e._v("altair-graphql-plugin-some-plugin")]),e._v(", hosted on "),i("code",[e._v("http://localhost:8080/")]),e._v(" (version is optional).")]),e._v(" "),i("h3",{attrs:{id:"the-typical-plugin"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#the-typical-plugin"}},[e._v("#")]),e._v(" The typical plugin")]),e._v(" "),i("p",[e._v("The typical plugin is a simple JavaScript class that implements an "),i("code",[e._v("initialize(ctx)")]),e._v(" and an optional "),i("code",[e._v("destroy()")]),e._v(" method:")]),e._v(" "),i("div",{staticClass:"language-js extra-class"},[i("pre",{pre:!0,attrs:{class:"language-js"}},[i("code",[i("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("AltairPluginName")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n    "),i("span",{pre:!0,attrs:{class:"token function"}},[e._v("initialize")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),i("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("ctx")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("async")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[e._v("destroy")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),i("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Add the class to the Altair plugins object")]),e._v("\nwindow"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("AltairGraphQL"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("plugins"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("AltairPluginName "),i("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" AltairPluginName"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),i("p",[e._v("You need the "),i("code",[e._v("plugin_class")]),e._v(" in the manifest.json file. In this case, it would be "),i("code",[e._v("AltairPluginName")]),e._v(".")]),e._v(" "),i("p",[e._v("The "),i("code",[e._v("initialize(ctx)")]),e._v(" method receives a plugin context parameter, which provides a way for the plugin to interact with Altair.")]),e._v(" "),i("p",[e._v("The plugin context contains things like:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("ctx.app.createPanel(element)")]),e._v(" - for rendering the provided DOM element in a new panel within Altair. An example of a panel is shown in the GraphiQL explorer plugin.")])]),e._v(" "),i("p",[i("img",{attrs:{src:"https://i.imgur.com/DANxbjh.png",alt:"graphiql explorer"}})]),e._v(" "),i("ul",[i("li",[i("p",[i("code",[e._v("ctx.app.createAction({ title, execute(state) {} })")]),e._v(" - for rendering an action button with the specified title and the callback to execute when the button is clicked.")])]),e._v(" "),i("li",[i("p",[i("code",[e._v("ctx.app.getWindowState(windowId)")]),e._v(" - resolves with the state of the specified window.")])]),e._v(" "),i("li",[i("p",[i("code",[e._v("context.app.addSubscriptionProvider(providerData)")]),e._v(" - adds a provider for subscriptions. "),i("code",[e._v("providerData")]),e._v(" is an object with the following properties:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("id")]),e._v(" "),i("em",[e._v("string")]),e._v(" - Unique identifier for the provider")]),e._v(" "),i("li",[i("code",[e._v("getProviderClass()")]),e._v(" "),i("em",[e._v("Promise")]),e._v(" - Function that returns a promise that resolves with the provider class (NOT an instance of the class)")]),e._v(" "),i("li",[i("code",[e._v("copyTag")]),e._v(" "),i("em",[e._v("string")]),e._v(" - The text to be shown for this provider in the Altair UI")])])]),e._v(" "),i("li",[i("p",[i("code",[e._v("ctx.events.on(evt, callback)")]),e._v(" - listens for events within Altair to perform an action within the plugin.")])]),e._v(" "),i("li",[i("p",[i("code",[e._v("ctx.theme.add(themeName, theme)")]),e._v(" - adds the provided theme to Altair's theme registry which can later be used.")])]),e._v(" "),i("li",[i("p",[i("code",[e._v("ctx.theme.enable(themeName, isDarkMode=false)")]),e._v(" - enables the specified theme.")])])]),e._v(" "),i("p",[e._v("...and several more functionalities.\n")]),e._v(" "),i("p",[e._v("For a simple plugin, you only need a single script containing your plugin class (as described above), your manifest.json file, and your package.json file (since it's going to be an npm package).")]),e._v(" "),i("p",[i("em",[e._v("This doc is incomplete (help appreciated in completing it).")])])])}),[],!1,null,null,null);t.default=n.exports}}]);